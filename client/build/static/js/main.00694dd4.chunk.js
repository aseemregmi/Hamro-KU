(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{144:function(e,t){},152:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(65),l=a.n(r),c=(a(89),a(4)),o=a(3),i=a(6),u=a(5),m=a(7),d=a(155),h=a(156),p=a(154),f=(a(91),a(10)),g=a.n(f),E=a(11),b=a(2),v=a(9),y=a.n(v),N=function(e){return s.a.createElement("div",{className:"form__form-group"},e.label?s.a.createElement("label",null,e.label):null,s.a.createElement("input",{placeholder:e.placeholder,name:e.name,type:e.type?e.type:"text",value:e.value,onChange:e.handleChange}))},S=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(b.a)({},e.target.name,e.target.value))},a.handleSubmit=function(){var e=Object(E.a)(g.a.mark(function e(t,n){var s,r,l,c;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),s=a.state,r=s.email,l=s.password,e.prev=2,e.next=5,y.a.post("/api/students/login",{email:r,password:l});case 5:c=e.sent,n({type:"LOGIN",payload:c.data}),a.setState({success:"You are successfully logged in. You are being redirected to dashboard..."}),setTimeout(function(){a.setState({success:null}),a.props.history.push("/dashboard/progress")},1500),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),a.setState({error:e.t0.response.data}),setTimeout(function(){a.setState({error:null})},5e3);case 15:case"end":return e.stop()}},e,this,[[2,11]])}));return function(t,a){return e.apply(this,arguments)}}(),a.state={email:"",password:"",error:null,success:null},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("form",{className:"form",onSubmit:function(t){e.handleSubmit(t,e.props.dispatch)}},s.a.createElement("h1",{className:"page-title mb-6"},"Student Login"),this.state.error?s.a.createElement("p",{className:"error-msg"},JSON.stringify(this.state.error)):null,this.state.success?s.a.createElement("p",{className:"success-msg"},JSON.stringify(this.state.success)):null,s.a.createElement(N,{type:"email",placeholder:"Email",name:"email",value:this.state.email,handleChange:this.handleChange}),s.a.createElement(N,{placeholder:"Password",type:"password",name:"password",value:this.state.password,handleChange:this.handleChange}),s.a.createElement(N,{type:"submit",value:"Submit"}))}}]),t}(n.Component),k=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={email:"",password:"",error:null,success:null},a.handleChange=function(e){a.setState(Object(b.a)({},e.target.name,e.target.value))},a.handleSubmit=function(){var e=Object(E.a)(g.a.mark(function e(t,n){var s,r,l,c;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=a.state,r=s.email,l=s.password,t.preventDefault(),e.prev=2,e.next=5,y.a.post("/api/teachers/login",{email:r,password:l});case 5:c=e.sent,n({type:"LOGIN",payload:c.data}),a.setState({success:"You are successfully logged in. You are being redirected to dashboard..."}),setTimeout(function(){a.props.history.push("/dashboard")},1500),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),a.setState({error:e.t0.response.data}),setTimeout(function(){a.setState({error:null})},5e3);case 15:case"end":return e.stop()}},e,this,[[2,11]])}));return function(t,a){return e.apply(this,arguments)}}(),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("form",{className:"form",onSubmit:function(t){e.handleSubmit(t,e.props.dispatch)}},s.a.createElement("h1",{className:"page-title mb-6"},"Teacher Login"),this.state.error?s.a.createElement("p",{className:"error-msg"},JSON.stringify(this.state.error)):null,this.state.success?s.a.createElement("p",{className:"success-msg"},JSON.stringify(this.state.success)):null,s.a.createElement(N,{type:"email",placeholder:"Email",name:"email",value:this.state.email,handleChange:this.handleChange}),s.a.createElement(N,{placeholder:"Password",type:"password",name:"password",value:this.state.password,handleChange:this.handleChange}),s.a.createElement(N,{type:"submit",value:"Submit"}))}}]),t}(n.Component),C=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={username:"",password:"",error:null,success:null},a.handleChange=function(e){a.setState(Object(b.a)({},e.target.name,e.target.value))},a.handleSubmit=function(){var e=Object(E.a)(g.a.mark(function e(t,n){var s,r,l,c;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),s=a.state,r=s.username,l=s.password,e.prev=2,e.next=5,y.a.post("/api/admins/login",{username:r,password:l});case 5:c=e.sent,n({type:"LOGIN",payload:c.data}),a.setState({success:"You are successfully logged in. You are being redirected to Admin Panel"}),setTimeout(function(){a.setState({success:null}),a.props.history.push("/adminpanel/students")},1500),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),a.setState({error:e.t0.response.data}),setTimeout(function(){a.setState({error:null})},5e3);case 15:case"end":return e.stop()}},e,this,[[2,11]])}));return function(t,a){return e.apply(this,arguments)}}(),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("form",{className:"form",onSubmit:function(t){e.handleSubmit(t,e.props.dispatch)}},s.a.createElement("h1",{className:"page-title mb-6"},"Admin Login"),this.state.error?s.a.createElement("p",{className:"error-msg"},JSON.stringify(this.state.error)):null,this.state.success?s.a.createElement("p",{className:"success-msg"},JSON.stringify(this.state.success)):null,s.a.createElement(N,{placeholder:"Username",name:"username",value:this.state.username,handleChange:this.handleChange}),s.a.createElement(N,{placeholder:"Password",type:"password",name:"password",value:this.state.password,handleChange:this.handleChange}),s.a.createElement(N,{type:"submit",value:"Submit"}))}}]),t}(n.Component),O=function(e){function t(e){var a;Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleLoginFormChange=function(){!0===a.state.teacherForm?(a.props.history.push({pathname:"/login",search:"?type=student"}),a.setState({teacherForm:!1,studentForm:!0})):!0===a.state.studentForm?(a.props.history.push({pathname:"/login",search:"?type=teacher"}),a.setState({teacherForm:!0,studentForm:!1})):(a.props.history.push({pathname:"/login",search:"?type=student"}),a.setState({teacherForm:!1,studentForm:!0,adminForm:!1}))};var n=a.props.history.location.search.replace("?type=","");return a.state="student"===n?{teacherForm:!1,studentForm:!0}:"teacher"===n?{teacherForm:!0,studentForm:!1}:"admin"===n?{adminForm:!0,teacherForm:!1,studetForm:!1}:{adminForm:!1,teacherForm:!1,studetForm:!0},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){window.scrollTo(0,0)}},{key:"render",value:function(){return s.a.createElement("div",{className:"login-page"},this.state.teacherForm?s.a.createElement(k,Object.assign({dispatch:this.props.dispatch},this.props)):null,this.state.studentForm?s.a.createElement(S,Object.assign({dispatch:this.props.dispatch},this.props)):null,this.state.adminForm?s.a.createElement(C,Object.assign({dispatch:this.props.dispatch},this.props)):null,this.state.adminForm?null:s.a.createElement("div",{className:"btn btn--block btn--secondary",onClick:this.handleLoginFormChange},this.state.teacherForm?"Not A Teacher ? Click Here to Login for Student":"Not A Student ? Click Here to Login for Teacher"),this.state.adminForm?s.a.createElement("div",{className:"btn btn--block btn--secondary",onClick:this.handleLoginFormChange},"Not A Admin ? Click Here to Login for Student"):null)}}]),t}(n.Component),j=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={name:"",email:"",password:"",group:{},phoneNo:"",registrationNo:"",address:"",groups:[],success:null,error:null},a.handleChange=function(e){a.setState(Object(b.a)({},e.target.name,e.target.value))},a.handleGroupChange=function(e){return a.setState({group:e})},a.handleSubmit=function(e){e.preventDefault();var t=a.state,n=t.name,s=t.email,r=t.password,l=t.group,c=t.phoneNo,o=t.registrationNo,i=t.address;y.a.post("/api/students",{name:n,email:s,password:r,phoneNo:c,registrationNo:o,group:l._id,address:i}).then(function(){a.setState({success:"You successfully Signed Up. Please wait till we verify your account"}),setTimeout(function(){a.setState({success:null})},2e3)}).catch(function(e){a.setState({error:e.response.data}),setTimeout(function(){a.setState({error:null})},2e3)})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;y.a.get("/api/groups").then(function(t){return e.setState({groups:t.data})})}},{key:"render",value:function(){var e=this;return s.a.createElement("form",{className:"form",onSubmit:this.handleSubmit},s.a.createElement("h1",{className:"page-title mb-6"},"Student Sign Up"),this.state.error?s.a.createElement("p",{className:"error-msg"},JSON.stringify(this.state.error)):null,this.state.success?s.a.createElement("p",{className:"success-msg"},JSON.stringify(this.state.success)):null,s.a.createElement(N,{placeholder:"Name",value:this.state.name,handleChange:this.handleChange,name:"name"}),s.a.createElement(N,{placeholder:"Email",value:this.state.email,handleChange:this.handleChange,name:"email",type:"email"}),s.a.createElement(N,{placeholder:"Password",value:this.state.password,handleChange:this.handleChange,type:"password",name:"password"}),s.a.createElement("div",{className:"dropdown"},s.a.createElement("span",null,this.state.group.shortForm||"Select Your Group","\xa0\xa0\xa0",s.a.createElement("i",{className:"fas fa-arrow-down"})),s.a.createElement("div",{className:"options"},this.state.groups.map(function(t){return s.a.createElement("span",{key:t.shortForm,onClick:function(){return e.handleGroupChange(t)}},t.shortForm)}))),s.a.createElement(N,{placeholder:"Phone No",value:this.state.phoneNo,name:"phoneNo",handleChange:this.handleChange}),s.a.createElement(N,{placeholder:"Registration No",value:this.state.registrationNo,handleChange:this.handleChange,name:"registrationNo"}),s.a.createElement(N,{placeholder:"Address",value:this.state.address,handleChange:this.handleChange,name:"address"}),s.a.createElement(N,{value:"Sign Up",type:"submit"}))}}]),t}(n.Component),D=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(b.a)({},e.target.name,e.target.value))},a.handleDepartmentChange=function(e){return a.setState({department:e})},a.handleSubmit=function(e){e.preventDefault();var t=a.state,n=t.name,s=t.email,r=t.password,l=t.department,c=t.phoneNo,o=t.post,i=t.address;y.a.post("/api/teachers",{name:n,email:s,password:r,department:l._id,phoneNo:c,post:o,address:i}).then(function(){a.setState({success:"You successfully Signed Up. Please wait till we verify your account"}),setTimeout(function(){a.setState({success:null,name:"",email:"",password:"",phoneNo:"",address:"",department:{},post:""})},2e3)}).catch(function(e){a.setState({error:e.response.data}),setTimeout(function(){a.setState({error:null})},2e3)})},a.state={name:"",email:"",password:"",phoneNo:"",address:"",departments:[],department:{},post:""},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;y.a.get("/api/departments").then(function(t){return e.setState({departments:t.data})})}},{key:"render",value:function(){var e=this;return s.a.createElement("form",{className:"form",onSubmit:this.handleSubmit},s.a.createElement("h1",{className:"page-title mb-6"},"Teacher Sign Up"),this.state.error?s.a.createElement("p",{className:"error-msg"},JSON.stringify(this.state.error)):null,this.state.success?s.a.createElement("p",{className:"success-msg"},JSON.stringify(this.state.success)):null,s.a.createElement(N,{placeholder:"Name",value:this.state.name,handleChange:this.handleChange,name:"name"}),s.a.createElement(N,{placeholder:"Email",value:this.state.email,handleChange:this.handleChange,name:"email",type:"email"}),s.a.createElement(N,{placeholder:"Password",value:this.state.password,handleChange:this.handleChange,type:"password",name:"password"}),s.a.createElement("div",{className:"dropdown"},s.a.createElement("span",null,this.state.department.name||"Select Your Department","\xa0\xa0\xa0",s.a.createElement("i",{className:"fas fa-arrow-down"})),s.a.createElement("div",{className:"options"},this.state.departments.map(function(t){return s.a.createElement("span",{key:t.name,onClick:function(){return e.handleDepartmentChange(t)}},t.name)}))),s.a.createElement(N,{placeholder:"Post",value:this.state.post,handleChange:this.handleChange,name:"post"}),s.a.createElement(N,{placeholder:"Address",value:this.state.address,handleChange:this.handleChange,name:"address"}),s.a.createElement(N,{placeholder:"Phone No.",value:this.state.phoneNo,handleChange:this.handleChange,name:"phoneNo"}),s.a.createElement(N,{value:"Sign Up",type:"submit"}))}}]),t}(n.Component),w=function(e){function t(e){var a;Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleSignUpFormChange=function(){!0===a.state.teacherForm?(a.props.history.push({pathname:"/signup",search:"?type=student"}),a.setState({teacherForm:!1})):(a.props.history.push({pathname:"/signup",search:"?type=teacher"}),a.setState({teacherForm:!0}))};var n=a.props.history.location.search.replace("?type=","");return a.state="student"===n?{teacherForm:!1}:{teacherForm:!0},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){window.scrollTo(0,0)}},{key:"render",value:function(){return s.a.createElement("div",{className:"signup-page"},this.state.teacherForm?s.a.createElement(D,null):s.a.createElement(j,null),s.a.createElement("div",{className:"btn btn--block btn--secondary",onClick:this.handleSignUpFormChange},this.state.teacherForm?"Not A Teacher ? Click Here to Sign Up for Student":"Not A Student ? Click Here to Sign Up for Teacher"))}}]),t}(n.Component),T=a(153),M=a(157),_=s.a.createContext(),F=function(e,t){switch(t.type){case"LOGIN":return localStorage.setItem("auth",JSON.stringify(t.payload)),{auth:t.payload};case"LOGOUT":return localStorage.removeItem("auth"),y.a.post("/api/tokens/delete",{token:e.auth.token}).then(function(e){return console.log("Logged Out Successfully")}).catch(function(e){return console.log(e)}),{auth:null};default:return e}},A=function(e){function t(e){var a;Object(c.a)(this,t),a=Object(i.a)(this,Object(u.a)(t).call(this,e));var n=null,s=localStorage.getItem("auth");return void 0!==s&&null!==s&&(n=JSON.parse(s)),a.state={auth:n,dispatch:function(e){a.setState(function(t){return F(t,e)})}},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return s.a.createElement(_.Provider,{value:this.state},this.props.children)}}]),t}(n.Component),I=_.Consumer,x=function(e){return function(t){function a(){return Object(c.a)(this,a),Object(i.a)(this,Object(u.a)(a).apply(this,arguments))}return Object(m.a)(a,t),Object(o.a)(a,[{key:"render",value:function(){var t=this;return s.a.createElement(I,null,function(a){return s.a.createElement(e,Object.assign({},t.props,{auth:a.auth,dispatch:a.dispatch}))})}}]),a}(n.Component)},V=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={loggedIn:!1,authType:null},a.handleLogout=Object(E.a)(g.a.mark(function e(){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.post("/api/tokens/delete",{token:a.props.auth.token});case 3:a.props.dispatch({type:"LOGOUT"}),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0),alert(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,6]])})),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return s.a.createElement("nav",{className:"nav"},s.a.createElement(T.a,{to:"/",className:"nav__title"},"Hamro-KU"),s.a.createElement("div",{style:{flex:1}}),s.a.createElement("div",{className:"nav__buttons"},"admin"===this.state.authType?s.a.createElement(s.a.Fragment,null,s.a.createElement(T.a,{to:"/adminpanel",className:"nav__button"},"Admin Panel"),s.a.createElement("div",{className:"nav__button",onClick:this.handleLogout},"Logout")):null,this.state.loggedIn&&"admin"!==this.state.authType?s.a.createElement(s.a.Fragment,null,s.a.createElement(T.a,{to:"/dashboard",className:"nav__button"},"Dashboard"),s.a.createElement("div",{className:"nav__button",onClick:this.handleLogout},"Logout")):null,this.state.loggedIn?null:s.a.createElement(s.a.Fragment,null,s.a.createElement(T.a,{to:"/login?type=student",className:"nav__button"},"Login"),s.a.createElement(T.a,{to:"/signup?type=student",className:"nav__button"},"Sign Up"))))}}],[{key:"getDerivedStateFromProps",value:function(e){return e.auth?{loggedIn:!!e.auth,authType:e.auth.type}:{loggedIn:!1,authType:null}}}]),t}(n.Component),P=x(Object(M.a)(V)),W=function(){return s.a.createElement("footer",{className:"footer"},s.a.createElement("span",{className:"copyright"},"Copyright \xa9 2018 ",s.a.createElement("br",null)," All Rights Reserved"),s.a.createElement("div",{className:"contributors"},s.a.createElement("span",null,"Aseem Regmi"),s.a.createElement("span",null,"Niranjan Pant"),s.a.createElement("span",null,"Amrit Acharya"),s.a.createElement("span",null,"Suyog Acharya")))},U=a(45),L=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleMarkerClick=function(e){},a.state={viewport:{width:1e3,height:600,latitude:27.619295,longitude:85.538625,zoom:17},position:{latitude:27.619295,longitude:85.538625},displayPopup:!1},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return s.a.createElement(U.b,Object.assign({},this.state.viewport,{onViewportChange:function(t){return e.setState({viewport:t})},mapboxApiAccessToken:"pk.eyJ1IjoiYXNlZW1yZWdtaSIsImEiOiJjam1lbmVrZzcyZHNjM3ZudGhjOW96a2Q2In0.T_c3K15I9NcPBBPKcTrAjw"}),s.a.createElement(U.a,Object.assign({},this.state.position,{closeButton:!1,anchor:"top"}),s.a.createElement("div",null,"You are here")))}}]),t}(n.Component),J=function(e){return window.scrollTo(0,0),s.a.createElement("div",{className:"explore"},s.a.createElement(L,null))},B=function(e){return s.a.createElement("div",{className:"getting-started"},s.a.createElement("div",{className:"getting-started__left"},e.loggedIn?"admin"===e.auth.type?s.a.createElement(s.a.Fragment,null,s.a.createElement("p",{className:"title"},"Go To Admin Panel"),s.a.createElement(T.a,{to:"/adminpanel",className:"btn btn--primary btn--block"},"Click Here")):s.a.createElement(s.a.Fragment,null,s.a.createElement("p",{className:"title"},"Go To Dashboard"),s.a.createElement(T.a,{to:"/dashboard",className:"btn btn--primary btn--block"},"Click Here")):s.a.createElement(s.a.Fragment,null,s.a.createElement("p",{className:"title"},"Students Start Here"),s.a.createElement("div",{className:"btn-collection"},s.a.createElement(T.a,{to:"/signup?type=student",className:"btn btn--primary btn--block"},"SignUp"),s.a.createElement(T.a,{to:"/login?type=student",className:"btn btn--primary btn--block"},"Log In")))),s.a.createElement("div",{className:"getting-started__right"},s.a.createElement("p",{className:"title"},e.loggedIn?"Want to Login From Another Account ?":"Teachers Start Here"),e.loggedIn?s.a.createElement("a",{href:"/",onClick:e.handleLogout,className:"btn btn--secondary btn--block"},"Log Out"):s.a.createElement("div",{className:"btn-collection"},s.a.createElement(T.a,{to:"/signup?type=teacher",className:"btn btn--secondary btn--block"},"SignUp"),s.a.createElement(T.a,{to:"/login?type=teacher",className:"btn btn--secondary btn--block"},"Log In"))))},G=function(){return s.a.createElement("div",{className:"welcome-block"},s.a.createElement("div",{className:"title-container"},s.a.createElement("p",{className:"heading2"},"Welcome to"),s.a.createElement("p",{className:"heading1"},"Kathmandu University")),s.a.createElement(T.a,{to:"/explore",className:"btn btn--large btn--primary"},"Explore Now"))},R=function(e){return s.a.createElement("div",{className:"news-and-events"},s.a.createElement("div",null,s.a.createElement("p",{className:"title"},"News And Events"),s.a.createElement("div",{className:"contents"},"fetching"===e.fetchingStatus?s.a.createElement("a",{rel:"noopener noreferrer",target:"_blank",href:"/"},"Getting News And Events. Click Here to Refresh"):null,"failed"===e.fetchingStatus?s.a.createElement("a",{href:"/"},"Couldn't get News And Events. Click Here to Refresh"):null,e.news.map(function(e){return s.a.createElement("a",{key:e.link,href:e.link,rel:"noopener noreferrer",target:"_blank"},e.item)}))),s.a.createElement("div",null,s.a.createElement("p",{className:"title"},"Notice And Announcement"),s.a.createElement("div",{className:"contents"},"failed"===e.fetchingStatus?s.a.createElement("a",{href:"/"},"Couldn't get News And Events. Click Here to Refresh"):null,"fetching"===e.fetchingStatus?s.a.createElement("a",{href:"/"},"Getting News And Events. Click Here to Refresh"):null,e.events.map(function(e){return s.a.createElement("a",{key:e.link,rel:"noopener noreferrer",target:"_blank",href:e.link},e.item)}))))},H=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleLogout=Object(E.a)(g.a.mark(function e(){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.post("/api/tokens/delete",{token:a.props.auth.token});case 3:a.props.dispatch({type:"LOGOUT"}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}},e,this,[[0,6]])})),a.state={loggedIn:!0,news:[],notice:[],fetchingStatus:"fetching"},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;y()("/api/kunewsandevents").then(function(t){var a=t.data,n=a.news,s=a.notice;e.setState({news:n,notice:s,fetchingStatus:"fetched"})}).catch(function(){return e.setState({fetchingStatus:"failed"})}),window.scrollTo(0,0)}},{key:"render",value:function(){return s.a.createElement("div",{className:"home"},s.a.createElement(G,null),s.a.createElement(B,{loggedIn:this.state.loggedIn,handleLogout:this.handleLogout,auth:this.props.auth}),s.a.createElement(R,{fetchingStatus:this.state.fetchingStatus,news:this.state.news,events:this.state.notice}))}}],[{key:"getDerivedStateFromProps",value:function(e){return{loggedIn:!!e.auth}}}]),t}(n.Component);var Y=function(e){return s.a.createElement("div",{className:"dashboard__sidebar"},s.a.createElement("div",{className:"personal-details"},s.a.createElement("div",{className:"avatar-tag"},function(e){var t="";return e.student.name.split(" ").forEach(function(e){t+=e.slice(0,1)+" "}),t.trim()}(e)),s.a.createElement("div",{className:"name"},e.student.name)),s.a.createElement("div",{className:"menus"},s.a.createElement(T.a,{to:"/dashboard/progress"},"My Progress"),s.a.createElement(T.a,{to:"/dashboard/notes"},"Notes"),s.a.createElement(T.a,{to:"/dashboard/classes"},"Classes"),s.a.createElement(T.a,{to:"/dashboard/notice"},"Notices"),s.a.createElement(T.a,{to:"/dashboard/chat-room"},"Class Chat Room"),e.student.specialAuthority?s.a.createElement(T.a,{to:"/dashboard/manage-class-routines"},"Manage Classes / Routines"):null))},z=a(23),Z=a(83),q=a.n(Z),K=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){a.setState({message:e.target.value})},a.addMessageToState=function(e){e.text&&(a.setState({messages:Object(z.a)(a.state.messages).concat([{text:e.text,from:e.from}])}),a.messages.current.scrollTop=a.messages.current.scrollHeight)},a.handleSubmit=function(e){e.preventDefault(),a.socket.emit("newMessageFromClient",{text:a.state.message,to:a.props.student.group._id,from:a.props.student.name},function(){a.addMessageToState({from:"You",text:a.state.message}),a.setState({message:""})})},a.state={message:"",messages:[]},a.messages=s.a.createRef(),a.socket=q()("http://localhost:5000"),a.socket.on("connect",function(){a.socket.emit("join",e.student,function(e){})}),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillUnmount",value:function(){this.socket.emit("end",{name:this.props.student.name,to:this.props.student.group._id,from:this.props.student.name},function(){})}},{key:"componentDidMount",value:function(){var e=this;this.socket.on("newMessageFromServer",function(t){e.addMessageToState(t)})}},{key:"render",value:function(){var e=1;return s.a.createElement("div",{className:"chat-room"},s.a.createElement("div",{className:"chat-room__messages",ref:this.messages},this.state.messages.map(function(t){return s.a.createElement("div",{key:++e,className:"from-text-wrapper"},s.a.createElement("span",null,s.a.createElement("i",null,t.from)),s.a.createElement("h3",null,t.text),s.a.createElement("br",null))})),s.a.createElement("form",{className:"chat-room__controls",onSubmit:this.handleSubmit},s.a.createElement("input",{className:"messages",placeholder:"Enter Your Message Here",name:"message",onChange:this.handleChange,value:this.state.message}),s.a.createElement("input",{type:"submit",name:"message",value:"Send",className:"submit btn btn--submit btn--primary"})))}}]),t}(n.Component),X=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={teachers:[],subjects:[],classes:[],teacher:"default",subject:"default",modal:!1,modalData:null,startTime:"",duration:"",day:"default"},a.getDayFromNumber=function(e){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e]},a.onChange=function(e){a.setState(Object(b.a)({},e.target.name,e.target.value))},a.handleNewClassSubmit=function(e){e.preventDefault();var t=a.state,n=t.teacher,s=t.subject;y.a.post("/api/classes",{teacher:n,subject:s,group:a.props.student.group._id}).then(function(e){console.log(e)}).catch(function(e){return console.log(e)})},a.handleModal=function(e){a.setState({modal:!a.state.modal,modalData:e})},a.handleRoutineSubmit=function(e){e.preventDefault();var t=a.state,n=t.startTime,s=t.duration,r=t.day,l=t.modalData;y.a.post("/api/routines",{startTime:n,duration:s,day:r,classId:l._id}).then(function(e){console.log(e),a.setState({modal:!1})}).catch(function(e){return console.log(e)})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;y.a.get("/api/classes?group=".concat(this.props.student.group._id)).then(function(t){return e.setState({classes:t.data})}),y.a.get("/api/teachers").then(function(t){return e.setState({teachers:t.data})}),y.a.get("/api/subjects").then(function(t){return e.setState({subjects:t.data})})}},{key:"render",value:function(){var e=this,t=this.state,a=t.teachers,n=t.classes,r=t.subjects,l=t.modal,c=t.modalData;return 0===a.length||0===r.length?null:s.a.createElement("div",{className:"manageClassRoutines"},l?s.a.createElement("div",{className:"modal"},s.a.createElement("div",{className:"close-btn",onClick:function(){return e.setState({modal:!1})}},"X"),s.a.createElement("div",{className:"contents"},s.a.createElement("h1",{className:"heading1"},"Class Details"),s.a.createElement("div",{className:"classdetails"},s.a.createElement("span",null,c.subject.name),s.a.createElement("span",null,c.teacher.name)),s.a.createElement("h2",{className:"heading2"},"Routine"),s.a.createElement("div",{className:"routinewrapper"},c.routine.map(function(t){return s.a.createElement("div",{key:JSON.stringify(t)},s.a.createElement("span",null,e.getDayFromNumber(t.day))," /"," ",s.a.createElement("span",null,t.startTime))})),s.a.createElement("h1",{className:"heading1"},"Add Routine To This Class"),s.a.createElement("form",{className:"addroutine",onSubmit:this.handleRoutineSubmit},s.a.createElement("div",null,s.a.createElement("label",{style:{padding:"10px",fontSize:"1.5rem"}},"Enter Start Time"),s.a.createElement("input",{type:"time",value:this.state.startTime,onChange:this.onChange,name:"startTime",placeholder:"Enter start time"})),s.a.createElement("div",null,s.a.createElement("input",{placeholder:"Enter duration",type:"text",value:this.state.duration,onChange:this.onChange,name:"duration"})),s.a.createElement("div",null,s.a.createElement("select",{name:"day",onChange:this.onChange,value:this.state.day},s.a.createElement("option",{disabled:!0,value:"default"},"Choose Day"),s.a.createElement("option",{value:0},"Sunday"),s.a.createElement("option",{value:1},"Monday"),s.a.createElement("option",{value:2},"Tuesday"),s.a.createElement("option",{value:3},"Wednesday"),s.a.createElement("option",{value:4},"Thursday"),s.a.createElement("option",{value:5},"Friday"),s.a.createElement("option",{value:6},"Saturday"))),s.a.createElement("div",null),s.a.createElement("div",null,s.a.createElement("input",{type:"submit",value:"Add Routine"}))))):null,s.a.createElement("div",null,s.a.createElement("h1",{className:"heading1"},"Current Classes"),s.a.createElement("div",{className:"currentclasseswrapper"},n.length>0?n.map(function(t){return s.a.createElement("div",{onClick:function(){return e.handleModal(t)},key:t.subject.subjectCode,className:"currentclass"},s.a.createElement("span",null,t.subject.name),s.a.createElement("span",null,t.teacher.name),s.a.createElement("div",{className:"routinewrapper"},t.routine.map(function(t){return s.a.createElement("div",{key:JSON.stringify(t)},s.a.createElement("span",null,e.getDayFromNumber(t.day))," /"," ",s.a.createElement("span",null,t.startTime))})))}):null)),s.a.createElement("div",null,s.a.createElement("h1",{className:"heading1"},"Add a New Class"),s.a.createElement("form",{className:"addnewclass",onSubmit:this.handleNewClassSubmit},s.a.createElement("select",{onChange:this.onChange,name:"subject",value:this.state.subject},s.a.createElement("option",{disabled:!0,value:"default"},"Choose Subject"),r.map(function(e){return s.a.createElement("option",{value:e._id,key:e.subjectCode},e.subjectCode)})),s.a.createElement("select",{onChange:this.onChange,value:this.state.teacher,name:"teacher"},s.a.createElement("option",{disabled:!0,value:"default"},"Choose Teacher"),a.map(function(e){return s.a.createElement("option",{value:e._id,key:e._id},e.name)})),s.a.createElement("input",{type:"submit",value:"Add New Class"}))))}}]),t}(n.Component),Q=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={classes:[]},a.getDayFromNumber=function(e){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e]},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;y.a.get("/api/classes?group=".concat(this.props.student.group._id)).then(function(t){return e.setState({classes:t.data})})}},{key:"render",value:function(){var e=this,t=this.state.classes;return 0===t.length?null:s.a.createElement("div",{className:"classes"},s.a.createElement("h1",{className:"heading1"},"Current Classes"),s.a.createElement("div",{className:"currentclasseswrapper"},t.length>0?t.map(function(t){return s.a.createElement("div",{key:t.subject.subjectCode,className:"currentclass"},s.a.createElement("span",null,t.subject.name),s.a.createElement("span",null,t.teacher.name),s.a.createElement("div",{className:"routinewrapper"},t.routine.map(function(t){return s.a.createElement("div",{key:JSON.stringify(t)},s.a.createElement("span",null,e.getDayFromNumber(t.day))," /"," ",s.a.createElement("span",null,t.startTime))})))}):null))}}]),t}(n.Component),$=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={classes:[],notes:[]},a.onChange=function(e){y.a.get("/api/notes?classId=".concat(e.target.value)).then(function(e){return a.setState({notes:e.data})}).catch(function(e){return console.log(e)})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;y.a.get("/api/classes?group=".concat(this.props.student.group._id)).then(function(t){return e.setState({classes:t.data})}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){return s.a.createElement("div",{className:"notes"},s.a.createElement("h1",{className:"heading1"},"Uploaded Notes"),s.a.createElement("select",{className:"selectclass2",name:"classofOfNotesToBeDisplayed",defaultValue:"default",onChange:this.onChange},s.a.createElement("option",{value:"default",disabled:!0},"Select Class"),this.state.classes.map(function(e){return s.a.createElement("option",{key:e._id,value:e._id},e.subject.name," / ",e.group.shortForm)})),s.a.createElement("div",{className:"notesContainer"},this.state.notes.length>0?this.state.notes.map(function(e){return s.a.createElement("div",{key:e.noteUrl},s.a.createElement("span",{className:"noteinfo"},e.name," / ",e.classId.teacher.name),s.a.createElement("a",{rel:"noopener noreferrer",target:"_blank",href:e.noteUrl,className:"btn btn--primary"},"Download Note"))}):s.a.createElement("h2",{className:"heading2"},"No Notes Uploaded")))}}]),t}(n.Component),ee=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={notices:[],classes:[],class:"default"},a.handleChange=function(e){a.setState(Object(b.a)({},e.target.name,e.target.value)),"class"===e.target.name&&y.a.get("/api/notices?class=".concat(e.target.value)).then(function(e){return a.setState({notices:e.data})}).catch(function(e){return console.log(e)})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;y.a.get("/api/classes?group=".concat(this.props.student.group._id)).then(function(t){return e.setState({classes:t.data})}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){return s.a.createElement("div",{className:"notice"},s.a.createElement("h1",{className:"heading1"},"Notices"),s.a.createElement("div",{className:"selectClassWrapper"},s.a.createElement("select",{name:"class",value:this.state.class,onChange:this.handleChange},s.a.createElement("option",{disabled:!0,value:"default"},"Select Class"),this.state.classes.length>0?this.state.classes.map(function(e){return s.a.createElement("option",{value:e._id,key:e._id},e.subject.subjectCode)}):null)),s.a.createElement("div",{className:"noticesWrapper"},this.state.notices.length>0?this.state.notices.map(function(e){return s.a.createElement("div",{className:"noticeWrapper",key:e._id},s.a.createElement("span",null,"Date : ",new Date(e.noticeDate).toLocaleDateString()),s.a.createElement("span",null,e.body),s.a.createElement("span",null,"End Date :"," ",new Date(e.noticeDeadline).toLocaleDateString()))}):s.a.createElement("h2",{className:"heading2"},"No Notices")))}}]),t}(n.Component),te=a(28),ae=a.n(te),ne=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={student:null,_id:"default",totalAttendanceSeries:[],totalAttendanceOptions:{plotOptions:{pie:{expandOnClick:!1}},labels:["AttendedDays","Not Attended Days"],legend:{show:!1}},totalInternalExamMarkOptions:{labels:["Internal Exam Marks"]},totalInternalExamMarkSeries:[],classes:[],columnChartAttendanceOptions:{},columnChartAttendanceSeries:[],columnChartInternalExamMarksOptions:{},columnChartInternalExamMarksSeries:[]},a.getAttendedDays=function(e){return a.state.student.attendance.reduce(function(t,a){return a.class._id===e&&a.status?t+1:t},0)},a.getTotalDays=function(e){return a.state.student.attendance.reduce(function(t,a){return a.class._id===e?t+1:t},0)},a.getAbsentDays=function(e){return a.state.student.attendance.reduce(function(t,a){return a.class._id!==e||a.status?t:t+1},0)},a.getObtainedMarks=function(e,t){var n;return a.state.student.internalExamMarks.forEach(function(a){a.examNo===t&&a.class._id===e&&(n=a.obtainedMarks)}),n},a.getNoOfExamsHeldTillNow=function(){var e=0;return a.state.student.internalExamMarks.forEach(function(t){t.examNo>e&&(e=t.examNo)}),new Array(e).fill(null)},a.getTotalClassDays=function(){return a.state.student.attendance.length},a.getTotalAttendedDays=function(){return a.state.student.attendance.reduce(function(e,t){return t.status?e+1:e},0)},a.getTotalObtainedMarks=function(){return a.state.student.internalExamMarks.reduce(function(e,t){return e+t.obtainedMarks},0)},a.getTotalFullMarks=function(){return a.state.student.internalExamMarks.reduce(function(e,t){return e+t.fullMarks},0)},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=Object(E.a)(g.a.mark(function e(){var t,a,n=this;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.get("/api/students/withalldata?_id=".concat(this.props.student._id));case 2:t=e.sent,a=t.data,this.setState({student:a},function(){n.setState({totalAttendanceSeries:[n.getTotalAttendedDays(),n.getTotalClassDays()-n.getTotalAttendedDays()],totalInternalExamMarkSeries:[Math.round(n.getTotalObtainedMarks()/n.getTotalFullMarks()*100)]})}),console.log(this.getNoOfExamsHeldTillNow()),y.a.get("/api/classes/?group=".concat(this.props.student.group._id)).then(function(e){return n.setState({classes:e.data},function(){n.setState({columnChartAttendanceSeries:[{name:"Absent Days",data:n.state.classes.map(function(e){return n.getAbsentDays(e._id)})},{name:"Present Days",data:n.state.classes.map(function(e){return n.getAttendedDays(e._id)})},{name:"Total Class Days",data:n.state.classes.map(function(e){return n.getTotalDays(e._id)})}],columnChartInternalExamMarksSeries:n.getNoOfExamsHeldTillNow().map(function(e,t){return{name:"Exam ".concat(t+1),data:n.state.classes.map(function(e){return n.getObtainedMarks(e._id,t+1)})}}),columnChartAttendanceOptions:{plotOptions:{bar:{horizontal:!1,endingShape:"rounded",columnWidth:"55%"}},dataLabels:{enabled:!0},stroke:{show:!0,width:2,colors:["transparent"]},xaxis:{categories:n.state.classes.map(function(e){return e.subject.subjectCode})},yaxis:{title:{text:" No of Days "}},fill:{opacity:1},tooltip:{y:{formatter:function(e){return e+" days"}}}},columnChartInternalExamMarksOptions:{plotOptions:{bar:{horizontal:!1,endingShape:"rounded",columnWidth:"55%"}},dataLabels:{enabled:!0},stroke:{show:!0,width:2,colors:["transparent"]},xaxis:{categories:n.state.classes.map(function(e){return e.subject.subjectCode})},yaxis:{title:{text:" Marks "}},fill:{opacity:1},tooltip:{y:{formatter:function(e){return e+" marks"}}}}})})}).catch(function(e){return console.log(e)});case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.student||0!==this.state.totalAttendanceSeries.length?s.a.createElement("div",{className:"myprogress"},s.a.createElement("h1",{className:"heading1"},"My Progress"),s.a.createElement("hr",{className:"horizontallinedivider"}),s.a.createElement("div",{className:"progressContainer"},s.a.createElement("div",null,s.a.createElement("h2",{className:"heading2"},"Total Attendance Progress"),s.a.createElement(ae.a,{type:"donut",options:this.state.totalAttendanceOptions,series:this.state.totalAttendanceSeries,width:"400"})),s.a.createElement("div",null,s.a.createElement("h2",{className:"heading2"},"Average Progress In Internal Examinations"),s.a.createElement(ae.a,{type:"radialBar",options:this.state.totalInternalExamMarkOptions,series:this.state.totalInternalExamMarkSeries,width:"400"}))),s.a.createElement("div",{className:"fullRecordWrapper"},s.a.createElement("div",null,s.a.createElement("h2",{className:"heading2"},"Attendance Progress"),s.a.createElement(ae.a,{type:"bar",options:this.state.columnChartAttendanceOptions,series:this.state.columnChartAttendanceSeries,height:"400"})),s.a.createElement("div",null,s.a.createElement("h2",{className:"heading2"},"Internal Exam Progress"),s.a.createElement(ae.a,{type:"bar",options:this.state.columnChartInternalExamMarksOptions,series:this.state.columnChartInternalExamMarksSeries,height:"400"})))):null}}]),t}(n.Component),se=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).props.match.params.option||a.props.history.push("/dashboard/progress"),a.state={student:{}},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;window.scrollTo(0,0),y.a.post("/api/tokens/token-user",{token:this.props.auth.token}).then(function(t){return e.setState({student:t.data})}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){return this.state.student.name?s.a.createElement("div",{className:"dashboard"},s.a.createElement(Y,{student:this.state.student}),s.a.createElement("div",{className:"dashboard__main-section"},"chat-room"===this.props.match.params.option?s.a.createElement(K,{student:this.state.student}):null,"classes"===this.props.match.params.option?s.a.createElement(Q,{student:this.state.student}):null,"notes"===this.props.match.params.option?s.a.createElement($,{student:this.state.student}):null,"notice"===this.props.match.params.option?s.a.createElement(ee,{student:this.state.student}):null,"progress"===this.props.match.params.option?s.a.createElement(ne,{student:this.state.student}):null,"manage-class-routines"===this.props.match.params.option&&this.state.student.specialAuthority?s.a.createElement(X,{student:this.state.student}):null)):null}}]),t}(n.Component),re=function(e){return s.a.createElement("div",{className:"dashboard__sidebar"},s.a.createElement("div",{className:"personal-details"},s.a.createElement("div",{className:"avatar-tag"},function(){var t="";return e.name.split(" ").forEach(function(e){t+=e.slice(0,1)+" "}),t.trim()}()),s.a.createElement("div",{className:"name"},e.name)),s.a.createElement("div",{className:"menus"},s.a.createElement(T.a,{to:"/dashboard/classes"},"My Classes"),s.a.createElement(T.a,{to:"/dashboard/notice"},"Send Notice"),s.a.createElement(T.a,{to:"/dashboard/student"},"Student Record"),s.a.createElement(T.a,{to:"/dashboard/notes"},"Upload Notes"),s.a.createElement(T.a,{to:"/dashboard/internal-marks"},"Add Internal Marks"),s.a.createElement(T.a,{to:"/dashboard/attendance"},"Manage Attendance")))},le=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={classes:[]},a.getDayFromNumber=function(e){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e]},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;y.a.get("/api/classes/?teacher=".concat(this.props.teacher._id)).then(function(t){return e.setState({classes:t.data})}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){var e=this,t=this.state.classes;return 0===t.length?null:s.a.createElement("div",{className:"myclasses"},s.a.createElement("h1",{className:"heading1"},"My Classes"),s.a.createElement("div",{className:"classesContainer"},t.map(function(t){return s.a.createElement("div",{className:"eachClass",key:JSON.stringify(t)},s.a.createElement("span",null,t.subject.subjectCode," /"," ",t.group.shortForm),s.a.createElement("div",{className:"routinescontainer"},t.routine.map(function(t){return s.a.createElement("span",{key:JSON.stringify(t),className:"singleroutine"},e.getDayFromNumber(t.day)," / ",t.startTime)})))})))}}]),t}(n.Component),ce=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={classes:[],classId:"default",name:"",error:null,success:null,classofOfNotesToBeDisplayed:"default",notesToBeDisplayed:[]},a.uploadButtonRef=s.a.createRef(),a.handleNotesUpload=function(e){if("default"===a.state.classId||""===a.state.name)a.setState({error:"Select Class And Give Name first"}),setTimeout(function(){a.setState({error:null})},2e3);else{e.preventDefault();var t=new FormData;t.append("file",e.target.files[0]),y.a.post("/fileupload",t).then(function(e){var t=e.data.data.link;y.a.post("/api/notes",{noteUrl:t,name:a.state.name,classId:a.state.classId}).then(function(e){a.setState({success:"Successfully Uploaded Note",classId:"default",name:""}),setTimeout(function(){a.setState({success:null})},2e3)})}).catch(function(e){return console.log(e)})}},a.onChange=function(e){a.setState(Object(b.a)({},e.target.name,e.target.value)),"classofOfNotesToBeDisplayed"===e.target.name&&y.a.get("/api/notes?classId=".concat(e.target.value)).then(function(e){console.log(e.data),a.setState({notesToBeDisplayed:e.data})}).catch(function(e){return console.log(e)})},a.handleSubmit=function(e){e.preventDefault()},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;y.a.get("/api/classes/?teacher=".concat(this.props.teacher._id)).then(function(t){e.setState({classes:t.data})})}},{key:"render",value:function(){var e=this;return 0===this.state.classes.length?null:s.a.createElement("div",{className:"uploadnotes"},this.state.error?s.a.createElement("p",{className:"error-msg"},JSON.stringify(this.state.error)):null,this.state.success?s.a.createElement("p",{className:"success-msg"},JSON.stringify(this.state.success)):null,s.a.createElement("h1",{className:"heading1"},"Upload Note"),s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("input",{type:"text",name:"name",value:this.state.name,onChange:this.onChange,placeholder:"Enter Name Of Note"}),s.a.createElement("select",{name:"classId",value:this.state.classId,onChange:this.onChange},s.a.createElement("option",{disabled:!0,value:"default"},"Select Class"),this.state.classes.map(function(e){return s.a.createElement("option",{key:e._id,value:e._id},e.subject.name," / ",e.group.shortForm)})),s.a.createElement("div",null,s.a.createElement("input",{ref:this.uploadButtonRef,style:{display:"none"},type:"file",onChange:this.handleNotesUpload}),s.a.createElement("button",{onClick:function(){return e.uploadButtonRef.current.click()}},"Upload Note For This Class"))),s.a.createElement("div",null,s.a.createElement("h1",{className:"heading1"},"Uploaded Notes"),s.a.createElement("select",{className:"selectclass2",name:"classofOfNotesToBeDisplayed",value:this.state.classofOfNotesToBeDisplayed,onChange:this.onChange},s.a.createElement("option",{disabled:!0,value:"default"},"Select Class"),this.state.classes.map(function(e){return s.a.createElement("option",{key:e._id,value:e._id},e.subject.name," / ",e.group.shortForm)})),s.a.createElement("div",{className:"notesContainer"},this.state.notesToBeDisplayed.length>0?this.state.notesToBeDisplayed.map(function(e){return s.a.createElement("div",{key:e.noteUrl},s.a.createElement("span",{className:"noteinfo"},e.name),s.a.createElement("a",{rel:"noopener noreferrer",target:"_blank",href:e.noteUrl,className:"btn btn--primary"},"Download Note"))}):s.a.createElement("h2",{className:"heading2"},"No Notes Uploaded"))))}}]),t}(n.Component),oe=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={classes:[],groupId:"default",studentIdWithMarks:[],examNo:"",fullMarks:"",error:null,success:null},a.onChange=function(e){a.setState(Object(b.a)({},e.target.name,e.target.value)),"groupId"===e.target.name&&y.a.get("/api/students/?group=".concat(e.target.value)).then(function(e){var t=[];e.data.forEach(function(e){t.push({_id:e._id,name:e.name,registrationNo:e.registrationNo})}),a.setState({studentIdWithMarks:t})}).catch(function(e){return console.log(e)})},a.handleMarksInput=function(e,t,n){var s=Object(z.a)(a.state.studentIdWithMarks);s[e]._id=n,s[e].marks=t,a.setState({studentIdWithMarks:s})},a.handleSubmit=function(){var e=Object(E.a)(g.a.mark(function e(t){var n,s,r,l,c,o,i;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n=a.state,s=n.examNo,r=n.studentIdWithMarks,l=n.groupId,c=n.fullMarks,o=n.classes,i="",o.forEach(function(e){e.group._id===l&&(i=e._id)}),console.log(i),""===s||"default"===l||""==c||""===i?(a.setState({error:"Please Fill Up Form Properly Before Submitting"}),setTimeout(function(){a.setState({error:null})},2e3)):y.a.post("/api/students/internalexammarks",{examNo:s,studentIdWithMarks:r,groupId:l,fullMarks:c,classId:i}).then(function(e){a.setState({success:"Marks Addedd Successfully",groupId:"default",studentIdWithMarks:[],examNo:"",fullMarks:""}),setTimeout(function(){a.setState({success:null})},2e3)}).catch(function(e){console.log(e)});case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;y.a.get("/api/classes/?teacher=".concat(this.props.teacher._id)).then(function(t){return e.setState({classes:t.data})}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){var e=this;return 0===this.state.classes.length?null:s.a.createElement("div",{className:"addinternalmarks"},this.state.error?s.a.createElement("p",{className:"error-msg"},JSON.stringify(this.state.error)):null,this.state.success?s.a.createElement("p",{className:"success-msg"},JSON.stringify(this.state.success)):null,s.a.createElement("h1",{className:"heading1"},"Add Internal Marks"),s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("div",{className:"grid3"},s.a.createElement("select",{name:"groupId",value:this.state.groupId,onChange:this.onChange},s.a.createElement("option",{disabled:!0,value:"default"},"Choose Class"),this.state.classes.map(function(e){return s.a.createElement("option",{key:e._id,value:e.group._id},e.subject.subjectCode," /"," ",e.group.shortForm)})),s.a.createElement("input",{type:"number",name:"examNo",value:this.state.examNo,onChange:this.onChange,placeholder:"Enter Exam Number"}),s.a.createElement("input",{type:"number",name:"fullMarks",value:this.state.fullMarks,onChange:this.onChange,placeholder:"Enter FullMarks"})),s.a.createElement("div",{className:"marksInputWrapper"},this.state.studentIdWithMarks.length>0?this.state.studentIdWithMarks.map(function(t,a){return s.a.createElement("div",{className:"marksInput",key:a},s.a.createElement("span",null,t.name," / ",t.registrationNo),s.a.createElement("input",{type:"text",placeholder:"Enter marks of this student",required:!0,value:e.state.studentIdWithMarks[a].marks,onChange:function(n){return e.handleMarksInput(a,n.target.value,t._id)}}))}):null),s.a.createElement("input",{type:"submit",value:"Submit",className:"btn btn--primary btn--submit",style:{width:"40%",fontSize:"1.5rem",padding:"7px",height:"auto"}})))}}]),t}(n.Component),ie=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={classes:[],groupId:"default",date:"",studentWithAttendance:[],error:null,success:null},a.handleSubmit=function(e){e.preventDefault();var t=a.state,n=t.classes,s=t.date,r=t.groupId,l=t.studentWithAttendance,c="";n.forEach(function(e){e.group._id===r&&(c=e._id)}),y.a.post("/api/students/attendance",{date:s,studentWithAttendance:l,classId:c}).then(function(){a.setState({success:"Attendance Created Successfully",date:"",groupId:"default",studentWithAttendance:[]}),setTimeout(function(){a.setState({success:null})},2e3)}).catch(function(e){a.setState({error:e}),setTimeout(function(){a.setState({error:null})},2e3)})},a.handleChange=function(e){a.setState(Object(b.a)({},e.target.name,e.target.value)),"groupId"===e.target.name&&y.a.get("/api/students/?group=".concat(e.target.value)).then(function(e){var t=[];e.data.forEach(function(e){t.push({_id:e._id,name:e.name,registrationNo:e.registrationNo,status:!0})}),a.setState({studentWithAttendance:t})}).catch(function(e){return console.log(e)})},a.handleAttendanceInput=function(e,t,n){var s=Object(z.a)(a.state.studentWithAttendance);s[e]._id=n,s[e].status=t,a.setState({studentWithAttendance:s})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;y.a.get("/api/classes/?teacher=".concat(this.props.teacher._id)).then(function(t){return e.setState({classes:t.data})}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"manageattendance"},this.state.error?s.a.createElement("p",{className:"error-msg"},JSON.stringify(this.state.error)):null,this.state.success?s.a.createElement("p",{className:"success-msg"},JSON.stringify(this.state.success)):null,s.a.createElement("h1",{className:"heading1"},"Manage Attendance"),s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("div",{className:"grid2"},s.a.createElement("select",{value:this.state.groupId,name:"groupId",onChange:this.handleChange},s.a.createElement("option",{disabled:!0,value:"default"},"Select Class"),this.state.classes.length>0?this.state.classes.map(function(e){return s.a.createElement("option",{value:e.group._id,key:e._id},e.subject.subjectCode," /"," ",e.group.shortForm)}):null),s.a.createElement("div",null,s.a.createElement("label",{style:{fontSize:"1.5rem"}},"Enter Date of Class"),s.a.createElement("input",{type:"date",name:"date",value:this.state.date,onChange:this.handleChange,required:!0}))),s.a.createElement("div",{className:"attendanceInputWrapper"},this.state.studentWithAttendance.length>0?this.state.studentWithAttendance.map(function(t,a){return s.a.createElement("div",{className:"attendanceInput",key:t._id},s.a.createElement("span",null,t.name," / ",t.registrationNo),s.a.createElement("div",{className:"checkboxwithlabel"},s.a.createElement("label",null,"Is Present ?"),s.a.createElement("input",{type:"checkbox",checked:e.state.studentWithAttendance[a].status,onChange:function(n){return e.handleAttendanceInput(a,n.target.checked,t._id)}})))}):null),s.a.createElement("input",{type:"submit",value:"Submit",className:"btn btn--primary btn--submit",style:{width:"40%",fontSize:"1.5rem",padding:"7px",height:"auto",marginLeft:"30px"}})))}}]),t}(n.Component),ue=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={classes:[],groupId:"default",studentId:"default",students:[],error:null,success:null,attendanceData:[],internalExamMarksData:[]},a.onChange=function(e){a.setState(Object(b.a)({},e.target.name,e.target.value)),"groupId"===e.target.name&&y.a.get("/api/students?group=".concat(e.target.value)).then(function(e){return a.setState({students:e.data,studentId:"default"})}).catch(function(e){return console.log(e)})},a.getTotalClassDays=function(){return a.state.attendanceData.length},a.getTotalAttendedDays=function(){return a.state.attendanceData.reduce(function(e,t){return t.status?e+1:e},0)},a.handleSubmit=function(e){e.preventDefault();var t=a.state,n=t.groupId,s=t.studentId,r=t.classes;if("default"===n&&"default"===s)a.setState({error:"Fill Up Form Properly"}),setTimeout(function(){a.setState({error:null})},2e3);else{var l="";r.forEach(function(e){e.group._id===n&&(l=e._id)}),y.a.get("/api/attendances?class=".concat(l,"&student=").concat(s)).then(function(e){return a.setState({attendanceData:e.data})}).catch(function(e){return console.log(e)}),y.a.get("/api/internalExamMarks?class=".concat(l,"&student=").concat(s)).then(function(e){return a.setState({internalExamMarksData:e.data})}).catch(function(e){return console.log(e)})}},a.getAverageInternalMark=function(){var e=a.state.internalExamMarksData;return e.reduce(function(e,t){return e+t.obtainedMarks},0)/e.reduce(function(e,t){return e+t.fullMarks},0)*20},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;y.a.get("/api/classes?teacher=".concat(this.props.teacher._id)).then(function(t){return e.setState({classes:t.data})}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){return s.a.createElement("div",{className:"studentrecord"},this.state.error?s.a.createElement("p",{className:"error-msg"},JSON.stringify(this.state.error)):null,this.state.success?s.a.createElement("p",{className:"success-msg"},JSON.stringify(this.state.success)):null,s.a.createElement("h1",{className:"heading1"},"Student Record"),s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("select",{value:this.state.groupId,name:"groupId",onChange:this.onChange},s.a.createElement("option",{disabled:!0,value:"default"},"Select Class"),this.state.classes.length>0?this.state.classes.map(function(e){return s.a.createElement("option",{value:e.group._id,key:e.group._id},e.subject.subjectCode," /"," ",e.group.shortForm)}):null),s.a.createElement("select",{value:this.state.studentId,name:"studentId",onChange:this.onChange},s.a.createElement("option",{disabled:!0,value:"default"},"Select Student"),this.state.students.length>0?this.state.students.map(function(e){return s.a.createElement("option",{value:e._id,key:e._id},e.name)}):null),s.a.createElement("input",{type:"submit",value:"Get Record",className:"btn btn--primary btn--submit",style:{width:"40%",fontSize:"1.5rem",padding:"7px",height:"auto"}})),s.a.createElement("div",{className:"recordWrapper"},this.state.attendanceData.length>0?s.a.createElement("div",null,s.a.createElement("h2",{className:"h2"},"Total Class Days : ",this.getTotalClassDays()),s.a.createElement("h2",{className:"h2"},"Total Present Days : ",this.getTotalAttendedDays()),s.a.createElement("h2",{className:"h2"},"Attendance Percentage :"," ",this.getTotalAttendedDays()/this.getTotalClassDays()*100," ","%")):null,this.state.internalExamMarksData.length>0?s.a.createElement("div",{className:"internalExamMarkWrapper"},this.state.internalExamMarksData.map(function(e){return s.a.createElement("div",{key:e._id,className:"internalExamMark"},s.a.createElement("h2",{className:"h2"},"Exam No : ",e.examNo),s.a.createElement("h2",{className:"h2"},"Obtained Marks : ",e.obtainedMarks),s.a.createElement("h2",{className:"h2"},"Full Marks : ",e.fullMarks))}),s.a.createElement("div",{className:"internalExamMark"},s.a.createElement("h2",{className:"h2"},"Average : ",this.getAverageInternalMark()," / 20"))):null))}}]),t}(n.Component),me=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={classes:[],class:"default",body:"",noticeDeadline:"",error:null,success:null,notices:[],class2:"default"},a.handleSubmit=function(e){e.preventDefault(),"default"===a.state.class?(a.setState({error:"Fill Up Form Properly"}),setTimeout(function(){a.setState({error:null})},2e3)):y.a.post("/api/notices",{noticeDeadline:a.state.noticeDeadline,classId:a.state.class,body:a.state.body}).then(function(){a.setState({success:"Notice Sent Successfully",class:"default",body:"",noticeDeadline:""}),setTimeout(function(){a.setState({success:null})},2e3)}).catch(function(e){a.setState({error:e}),setTimeout(function(){a.setState({error:null})},2e3)})},a.handleChange=function(e){a.setState(Object(b.a)({},e.target.name,e.target.value)),"class2"===e.target.name&&y.a.get("/api/notices?class=".concat(e.target.value)).then(function(e){return a.setState({notices:e.data})}).catch(function(e){return console.log(e)})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;y.a.get("/api/classes?teacher=".concat(this.props.teacher._id)).then(function(t){return e.setState({classes:t.data})}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){return s.a.createElement("div",{className:"sendnotice"},s.a.createElement("h1",{className:"heading1"},"Send Notice"),s.a.createElement("form",{onSubmit:this.handleSubmit},this.state.error?s.a.createElement("p",{className:"error-msg"},JSON.stringify(this.state.error)):null,this.state.success?s.a.createElement("p",{className:"success-msg"},JSON.stringify(this.state.success)):null,s.a.createElement("select",{name:"class",value:this.state.class,onChange:this.handleChange},s.a.createElement("option",{disabled:!0,value:"default"},"Select Class"),this.state.classes.length>0?this.state.classes.map(function(e){return s.a.createElement("option",{value:e._id,key:e._id}," ",e.subject.subjectCode," /"," ",e.group.shortForm," ")}):null),s.a.createElement("div",null,s.a.createElement("label",null,"Place date of notice deadline"),s.a.createElement("input",{type:"date",name:"noticeDeadline",onChange:this.handleChange,value:this.state.noticeDeadline,required:!0})),s.a.createElement("input",{type:"text",name:"body",value:this.state.body,placeholder:"Enter Notice Body",onChange:this.handleChange,required:!0}),s.a.createElement("input",{type:"submit",value:"Send Notice",className:"btn btn--submit btn--secondary",style:{height:"auto"}})),s.a.createElement("div",null,s.a.createElement("h1",{className:"heading1"},"Sent Notices"),s.a.createElement("div",{className:"selectClassWrapper"},s.a.createElement("select",{name:"class2",value:this.state.class2,onChange:this.handleChange},s.a.createElement("option",{disabled:!0,value:"default"},"Select Class"),this.state.classes.length>0?this.state.classes.map(function(e){return s.a.createElement("option",{value:e._id,key:e._id}," ",e.subject.subjectCode," /"," ",e.group.shortForm," ")}):null)),s.a.createElement("div",{className:"noticesWrapper"},this.state.notices.length>0?this.state.notices.map(function(e){return s.a.createElement("div",{className:"noticeWrapper",key:e._id},s.a.createElement("span",null,"Date : ",new Date(e.noticeDate).toLocaleDateString()),s.a.createElement("span",null,e.body),s.a.createElement("span",null,"End Date :"," ",new Date(e.noticeDeadline).toLocaleDateString()))}):s.a.createElement("h2",{className:"heading2"},"No Notices"))))}}]),t}(n.Component),de=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).props.match.params.option||a.props.history.push("/dashboard/classes"),a.state={teacher:null},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;window.scrollTo(0,0),y.a.post("/api/tokens/token-user",{token:this.props.auth.token}).then(function(t){return e.setState({teacher:t.data})}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){return this.state.teacher?s.a.createElement("div",{className:"dashboard"},s.a.createElement(re,{name:this.state.teacher.name}),s.a.createElement("div",{className:"dashboard__main-section"},"classes"===this.props.match.params.option?s.a.createElement(le,{teacher:this.state.teacher}):null,"internal-marks"===this.props.match.params.option?s.a.createElement(oe,{teacher:this.state.teacher}):null,"attendance"===this.props.match.params.option?s.a.createElement(ie,{teacher:this.state.teacher}):null,"student"===this.props.match.params.option?s.a.createElement(ue,{teacher:this.state.teacher}):null,"notes"===this.props.match.params.option?s.a.createElement(ce,{teacher:this.state.teacher}):null,"notice"===this.props.match.params.option?s.a.createElement(me,{teacher:this.state.teacher}):null)):null}}]),t}(n.Component),he=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).props.match.params.option||a.props.history.push("/dashboard/progress"),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){window.scrollTo(0,0)}},{key:"render",value:function(){return this.props.auth?"student"===this.props.auth.userType?s.a.createElement(se,this.props):"teacher"===this.props.auth.userType?s.a.createElement(de,this.props):null:null}}]),t}(n.Component),pe=function(e){var t=function(t){function a(e){var t;return Object(c.a)(this,a),(t=Object(i.a)(this,Object(u.a)(a).call(this,e))).state={auth:e.auth},t}return Object(m.a)(a,t),Object(o.a)(a,[{key:"componentDidMount",value:function(){this.props.auth?"admin"===this.props.auth.type&&this.props.history.push("/login?type=student"):this.props.history.push("/login?type=student")}},{key:"render",value:function(){return s.a.createElement(e,Object.assign({},this.props,{auth:this.props.auth,dispatch:this.props.dispatch}))}}],[{key:"getDerivedStateFromProps",value:function(e){return e.auth?"admin"===e.auth.type&&e.history.push("/login?type=student"):e.history.push("/login?type=student"),{auth:e.auth}}}]),a}(n.Component);return x(t)},fe=function(e){var t=function(t){function a(){var e,t;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(t=Object(i.a)(this,(e=Object(u.a)(a)).call.apply(e,[this].concat(s)))).state={auth:null},t}return Object(m.a)(a,t),Object(o.a)(a,[{key:"componentDidUpdate",value:function(){this.state.auth&&"admin"===this.state.auth.type||this.props.history.push("/")}},{key:"componentDidMount",value:function(){this.state.auth&&"admin"===this.state.auth.type||this.props.history.push("/")}},{key:"render",value:function(){return s.a.createElement(e,Object.assign({},this.props,{auth:this.props.auth,dispatch:this.props.dispatch}))}}],[{key:"getDerivedStateFromProps",value:function(e){return{auth:e.auth}}}]),a}(n.Component);return x(t)},ge=function(e){var t=function(t){function a(){var e,t;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(t=Object(i.a)(this,(e=Object(u.a)(a)).call.apply(e,[this].concat(s)))).state={auth:null},t}return Object(m.a)(a,t),Object(o.a)(a,[{key:"componentDidMount",value:function(){this.state.auth&&("admin"===this.state.auth.type?this.props.history.push("/adminpanel"):this.props.history.push("/dashboard"))}},{key:"render",value:function(){return s.a.createElement(e,Object.assign({},this.props,{auth:this.props.auth,dispatch:this.props.dispatch}))}}],[{key:"getDerivedStateFromProps",value:function(e){return{auth:e.auth}}}]),a}(n.Component);return function(e){return s.a.createElement(I,null,function(a){return s.a.createElement(t,Object.assign({auth:a.auth},e,{dispatch:a.dispatch}))})}},Ee=function(e){return s.a.createElement("div",{className:"adminpanel__sidebar"},s.a.createElement("div",{className:"menus"},s.a.createElement(T.a,{to:"/adminpanel/students"},"Students"),s.a.createElement(T.a,{to:"/adminpanel/teachers"},"Teachers"),s.a.createElement(T.a,{to:"/adminpanel/subjects"},"Subject"),s.a.createElement(T.a,{to:"/adminpanel/groups"},"Group"),s.a.createElement(T.a,{to:"/adminpanel/departments"},"Departments")))},be=function(e){return s.a.createElement("div",{className:"table"},s.a.createElement("div",{className:"heads"},e.headers.map(function(e){return s.a.createElement("span",{key:e,className:"field"},e)})),s.a.createElement("div",{className:"data"},e.data.map(function(t,a){return a>10?null:s.a.createElement("div",{className:"fields",onClick:function(){e.handleDataInModal(t),e.handleDisplayModal()},key:t.email},s.a.createElement("span",{className:"field"},t.name),s.a.createElement("span",{className:"field"},t.email),e.studentTable?s.a.createElement("span",{className:"field"},t.group.shortForm):null,e.teacherTable?s.a.createElement("span",{className:"field"},t.department.name):null,s.a.createElement("span",{className:"field"},t.verified?"Verified":"Not Verified"))})))},ve=function(e){return s.a.createElement("div",{className:"student-profile-modal"},s.a.createElement("div",{className:"close-btn",onClick:e.handleDisplayModal},s.a.createElement("i",{className:"fas fa-times"})),s.a.createElement("div",{className:"contents"},s.a.createElement("h1",{className:"heading1"},"Student Profile"),s.a.createElement("div",{className:"student-content"},s.a.createElement("span",null,"Name : ",e.student.name),s.a.createElement("span",null,"E-mail : ",e.student.email),s.a.createElement("span",null," Registration No : ",e.student.registrationNo),s.a.createElement("span",null,"Phone No : ",e.student.phoneNo),s.a.createElement("span",null,"Group : ",e.student.group.groupName),s.a.createElement("span",null,"Year : ",e.student.group.year),s.a.createElement("span",null,"School : ",e.student.group.school),s.a.createElement("span",null,"Phone No : ",e.student.phoneNo),s.a.createElement("span",{onClick:function(){y.a.patch("/api/students/specialAuthority/".concat(e.student._id)).then(function(){e.resetData(),e.handleDisplayModal()}).catch(function(e){return alert(e)})},style:{cursor:"pointer",color:"red"}},e.student.specialAuthority?"This Student Has Special Authority in his/her class. Click Here If you want to cancel his/her authority":"This Student doesn't have special authority in his/her class. Click Here If you want to grant him/her authority"),s.a.createElement("span",{onClick:function(){y.a.patch("/api/students/verify/".concat(e.student._id)).then(function(){e.resetData(),e.handleDisplayModal()}).catch(function(e){return alert(e)})},style:{cursor:"pointer",color:"red"}},e.student.verified?"This account is verified. Are There Some Mistakes. Click Here To UnVerify":"This account is not Verified. Click Here If The Informations Are Correct and You Need To Verify Account"),s.a.createElement("button",{className:"btn btn--primary",onClick:function(){y.a.delete("/api/students/".concat(e.student._id)).then(function(){e.resetData(),e.handleDisplayModal()}).catch(function(e){return alert(e)})}},"Click Here To Delete This Student Account"))))},ye=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={students:[],studentsToBeDisplayed:[],filterType:["Verification","Group"],filterTypeValue:"Select Filter Type",filterFields:[],filterFieldValue:"First Select Filter Type",displayModal:!1,student:{}},a.fetchStudents=function(){return new Promise(function(e,t){y.a.get("/api/students").then(function(t){a.setState({students:t.data,studentsToBeDisplayed:t.data},function(){return e()})}).catch(function(e){return alert(e)})})},a.resetData=function(){a.fetchStudents().then(Object(E.a)(g.a.mark(function e(){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a.state.filterFieldValue.length<=15)){e.next=3;break}return e.next=3,a.handleSubmit();case 3:a.state.studentsToBeDisplayed.forEach(function(e){e._id===a.state.student._id&&a.setState({student:e})});case 4:case"end":return e.stop()}},e,this)})))},a.handleDataInModal=function(e){a.setState({student:e})},a.handleDisplayModal=function(){a.setState({displayModal:!a.state.displayModal})},a.handleSubmit=function(){return a.state.filterFieldValue.length>15&&alert("Choose Filter Options Wisely"),new Promise(function(e,t){switch(a.state.filterTypeValue){case"Group":var n=a.state.students.slice().filter(function(e){return e.group.shortForm===a.state.filterFieldValue});a.setState({studentsToBeDisplayed:n},function(){return e()});break;case"Verification":var s=a.state.students.slice().filter(function(e){return"Verified"===a.state.filterFieldValue?e.verified:!e.verified});a.setState({studentsToBeDisplayed:s},function(){return e()});break;default:return null}})},a.handleFilterTypeValue=function(e){switch(e){case"Group":y.a.get("/api/groups").then(function(t){return a.setState({filterTypeValue:e,filterFields:t.data,filterFieldValue:"Select Filter Field"})}).catch(function(e){return alert(e)});break;case"Verification":a.setState({filterFields:["Verified","Not Verified"],filterTypeValue:e,filterFieldValue:"Select Filter Field"});break;default:return null}},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.fetchStudents()}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"students"},this.state.displayModal?s.a.createElement(ve,{handleDisplayModal:this.handleDisplayModal,student:this.state.student,resetData:this.resetData}):null,s.a.createElement("div",{className:"students__filter-container"},s.a.createElement("span",null,"Filter By : "),s.a.createElement("div",{className:"filter-type"},this.state.filterTypeValue,s.a.createElement("div",{className:"options"},this.state.filterType.map(function(t){return s.a.createElement("span",{key:t,onClick:function(){e.handleFilterTypeValue(t)}},t)})),"\xa0\xa0\xa0",s.a.createElement("i",{className:"fas fa-arrow-down"})),s.a.createElement("div",{className:"filter-fields"},s.a.createElement(s.a.Fragment,null,this.state.filterFieldValue,"\xa0\xa0\xa0",s.a.createElement("i",{className:"fas fa-arrow-down"}),s.a.createElement("div",{className:"filter-items-container"},this.state.filterFields.map(function(t){return s.a.createElement("span",{key:t.shortForm||t,onClick:function(){e.setState({filterFieldValue:t.shortForm||t})}},t.shortForm||t)})))),s.a.createElement("button",{className:"btn btn--primary",onClick:this.handleSubmit},"Submit")),s.a.createElement(be,{headers:["Name","Email","Group","Verified"],studentTable:!0,data:this.state.studentsToBeDisplayed,handleDataInModal:this.handleDataInModal,handleDisplayModal:this.handleDisplayModal}))}}]),t}(n.Component),Ne=function(e){return s.a.createElement("div",{className:"student-profile-modal"},s.a.createElement("div",{className:"close-btn",onClick:e.handleDisplayModal},s.a.createElement("i",{className:"fas fa-times"})),s.a.createElement("div",{className:"contents"},s.a.createElement("h1",{className:"heading1"},"Teacher Profile"),s.a.createElement("div",{className:"student-content"},s.a.createElement("span",null,"Name : ",e.teacher.name),s.a.createElement("span",null,"E-mail : ",e.teacher.email),s.a.createElement("span",null,"Phone No : ",e.teacher.phoneNo),s.a.createElement("span",null,"Post : ",e.teacher.post),s.a.createElement("span",null,"Department : ",e.teacher.department.name),s.a.createElement("span",null,"Address : ",e.teacher.address),s.a.createElement("span",{onClick:function(){y.a.patch("/api/teachers/verify/".concat(e.teacher._id)).then(function(){e.resetData(),e.handleDisplayModal()}).catch(function(e){return alert(e)})},style:{cursor:"pointer",color:"red"}},e.teacher.verified?"This account is verified. Are There Some Mistakes. Click Here To UnVerify":"This account is not Verified. Click Here If The Informations Are Correct and You Need To Verify Account"),s.a.createElement("button",{className:"btn btn--primary",onClick:function(){y.a.delete("/api/teachers/".concat(e.teacher._id)).then(function(){e.resetData(),e.handleDisplayModal()}).catch(function(e){return alert(e)})}},"Click Here To Delete This Teacher Account"))))},Se=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={teachers:[],teachersToBeDisplayed:[],filterType:["Verification","Department"],filterTypeValue:"Select Filter Type",filterFields:[],filterFieldValue:"First Select Filter Type",displayModal:!1,teacher:{}},a.handleDataInModal=function(e){a.setState({teacher:e})},a.handleDisplayModal=function(){a.setState({displayModal:!a.state.displayModal})},a.fetchTeachers=function(){return new Promise(function(e,t){y.a.get("/api/teachers").then(function(t){a.setState({teachers:t.data,teachersToBeDisplayed:t.data},function(){return e()})}).catch(function(e){return alert(e)})})},a.resetData=function(){a.fetchTeachers().then(Object(E.a)(g.a.mark(function e(){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.handleSubmit();case 2:a.state.teachersToBeDisplayed.forEach(function(e){e._id===a.state.teacher._id&&a.setState({teacher:e})});case 3:case"end":return e.stop()}},e,this)})))},a.handleDataInModal=function(e){a.setState({teacher:e})},a.handleDisplayModal=function(){a.setState({displayModal:!a.state.displayModal})},a.handleSubmit=function(){return new Promise(function(e,t){switch(a.state.filterTypeValue){case"Department":var n=a.state.teachers.slice().filter(function(e){return e.department.name===a.state.filterFieldValue});a.setState({teachersToBeDisplayed:n},function(){return e()});break;case"Verification":var s=a.state.teachers.slice().filter(function(e){return"Verified"===a.state.filterFieldValue?e.verified:!e.verified});a.setState({teachersToBeDisplayed:s},function(){return e()});break;default:return null}})},a.handleFilterTypeValue=function(e){switch(e){case"Department":y.a.get("/api/departments").then(function(t){return a.setState({filterTypeValue:e,filterFields:t.data,filterFieldValue:"Select Filter Field"})}).catch(function(e){return alert(e)});break;case"Verification":a.setState({filterFields:["Verified","Not Verified"],filterTypeValue:e,filterFieldValue:"Select Filter Field"});break;default:return null}},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.fetchTeachers()}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"students"},this.state.displayModal?s.a.createElement(Ne,{handleDisplayModal:this.handleDisplayModal,teacher:this.state.teacher,resetData:this.resetData}):null,s.a.createElement("div",{className:"students__filter-container"},s.a.createElement("span",null,"Filter By : "),s.a.createElement("div",{className:"filter-type"},this.state.filterTypeValue,s.a.createElement("div",{className:"options"},this.state.filterType.map(function(t){return s.a.createElement("span",{key:t,onClick:function(){e.handleFilterTypeValue(t)}},t)})),"\xa0\xa0\xa0",s.a.createElement("i",{className:"fas fa-arrow-down"})),s.a.createElement("div",{className:"filter-fields"},s.a.createElement(s.a.Fragment,null,this.state.filterFieldValue,"\xa0\xa0\xa0",s.a.createElement("i",{className:"fas fa-arrow-down"}),s.a.createElement("div",{className:"filter-items-container"},this.state.filterFields.map(function(t){return s.a.createElement("span",{key:t.name||t,onClick:function(){e.setState({filterFieldValue:t.name||t})}},t.name||t)})))),s.a.createElement("button",{className:"btn btn--primary",onClick:this.handleSubmit},"Submit")),s.a.createElement(be,{headers:["Name","Email","Department","Verified"],teacherTable:!0,data:this.state.teachersToBeDisplayed,handleDataInModal:this.handleDataInModal,handleDisplayModal:this.handleDisplayModal}))}}]),t}(n.Component),ke=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={name:"",subjectCode:"",credit:"",error:null,success:null,subjects:[]},a.handleChange=function(e){a.setState(Object(b.a)({},e.target.name,e.target.value))},a.fetchSubjects=function(){y.a.get("/api/subjects").then(function(e){return a.setState({subjects:e.data})}).catch(function(e){return alert(e)})},a.handleSubmit=function(e){e.preventDefault();var t=a.state,n=t.name,s=t.subjectCode,r=t.credit;y.a.post("/api/subjects",{name:n,subjectCode:s,credit:r}).then(function(){a.setState({success:"You have Created a subject"}),a.fetchSubjects(),setTimeout(function(){a.setState({success:null})},1500)}).catch(function(e){a.setState({error:e.response.data}),setTimeout(function(){a.setState({error:null})},1500)})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.fetchSubjects()}},{key:"render",value:function(){return s.a.createElement("div",{className:"group"},s.a.createElement("span",{className:"heading1"},"Register A New Subject"),s.a.createElement("form",{className:"form",onSubmit:this.handleSubmit},this.state.error?s.a.createElement("p",{className:"error-msg"},JSON.stringify(this.state.error)):null,this.state.success?s.a.createElement("p",{className:"success-msg"},JSON.stringify(this.state.success)):null,s.a.createElement("div",{className:"form__group"},s.a.createElement(N,{placeholder:"Enter Subject Name",name:"name",value:this.state.name,handleChange:this.handleChange})),s.a.createElement("div",{className:"form__group"},s.a.createElement(N,{placeholder:"Enter Subject Code",name:"subjectCode",value:this.state.subjectCode,handleChange:this.handleChange})),s.a.createElement("div",{className:"form__group"},s.a.createElement(N,{placeholder:"Enter Subject Credit",name:"credit",value:this.state.credit,handleChange:this.handleChange})),s.a.createElement(N,{type:"submit",value:"Submit"})),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("span",{className:"heading2"},"Registered Subjects"),s.a.createElement("div",{className:"registered-groups"},this.state.subjects.map(function(e){return s.a.createElement("span",{style:{fontSize:"1.25rem"},key:e.subjectCode},e.subjectCode)})))}}]),t}(n.Component),Ce=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={groupName:"",year:"",shortForm:"",school:"",error:null,success:null,groups:[]},a.handleChange=function(e){a.setState(Object(b.a)({},e.target.name,e.target.value))},a.fetchGroups=function(){y.a.get("/api/groups").then(function(e){return a.setState({groups:e.data})}).catch(function(e){return alert(e)})},a.handleSubmit=function(e){e.preventDefault();var t=a.state,n=t.groupName,s=t.year,r=t.shortForm,l=t.school;y.a.post("/api/groups",{groupName:n,year:s,shortForm:r,school:l}).then(function(){a.setState({success:"You have Created a group"}),a.fetchGroups(),setTimeout(function(){a.setState({success:null})},1500)}).catch(function(e){a.setState({error:e.response.data}),console.log(e.response.data),setTimeout(function(){a.setState({error:null})},1500)})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.fetchGroups()}},{key:"render",value:function(){return s.a.createElement("div",{className:"group"},s.a.createElement("span",{className:"heading1"},"Register A New Group"),s.a.createElement("form",{className:"form",onSubmit:this.handleSubmit},this.state.error?s.a.createElement("p",{className:"error-msg"},JSON.stringify(this.state.error)):null,this.state.success?s.a.createElement("p",{className:"success-msg"},JSON.stringify(this.state.success)):null,s.a.createElement("div",{className:"form__group"},s.a.createElement(N,{placeholder:"Enter Group Name",name:"groupName",value:this.state.groupName,handleChange:this.handleChange})),s.a.createElement("div",{className:"form__group"},s.a.createElement(N,{placeholder:"Enter Group Year",name:"year",value:this.state.year,handleChange:this.handleChange})),s.a.createElement("div",{className:"form__group"},s.a.createElement(N,{placeholder:"Enter Group ShortForm",name:"shortForm",value:this.state.shortForm,handleChange:this.handleChange})),s.a.createElement("div",{className:"form__group"},s.a.createElement(N,{placeholder:"Enter Group School",name:"school",value:this.state.school,handleChange:this.handleChange})),s.a.createElement(N,{type:"submit",value:"Submit"})),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("span",{className:"heading2"},"Registered Groups"),s.a.createElement("div",{className:"registered-groups"},this.state.groups.map(function(e){return s.a.createElement("span",{style:{fontSize:"1.25rem"},key:e.shortForm},e.shortForm)})))}}]),t}(n.Component),Oe=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={name:"",description:"",lattitude:"",longitude:"",error:null,success:null,departments:[]},a.handleChange=function(e){a.setState(Object(b.a)({},e.target.name,e.target.value))},a.fetchSubjects=function(){y.a.get("/api/departments").then(function(e){return a.setState({departments:e.data})}).catch(function(e){return alert(e)})},a.handleSubmit=function(e){e.preventDefault();var t=a.state,n=t.name,s=t.description,r=t.lattitude,l=t.longitude;y.a.post("/api/departments",{name:n,description:s,lattitude:r,longitude:l}).then(function(){a.setState({success:"You have Created a Department"}),a.fetchSubjects(),setTimeout(function(){a.setState({success:null})},1500)}).catch(function(e){a.setState({error:e.response.data}),setTimeout(function(){a.setState({error:null})},1500)})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.fetchSubjects()}},{key:"render",value:function(){return s.a.createElement("div",{className:"group"},s.a.createElement("span",{className:"heading1"},"Register A New Department"),s.a.createElement("form",{className:"form",onSubmit:this.handleSubmit},this.state.error?s.a.createElement("p",{className:"error-msg"},JSON.stringify(this.state.error)):null,this.state.success?s.a.createElement("p",{className:"success-msg"},JSON.stringify(this.state.success)):null,s.a.createElement("div",{className:"form__group"},s.a.createElement(N,{placeholder:"Enter Department Name",name:"name",value:this.state.name,handleChange:this.handleChange})),s.a.createElement("div",{className:"form__group"},s.a.createElement(N,{placeholder:"Enter Department Description",name:"description",value:this.state.description,handleChange:this.handleChange})),s.a.createElement("div",{className:"form__group"},s.a.createElement(N,{placeholder:"Enter Lattitude of Department",name:"lattitude",value:this.state.lattitude,handleChange:this.handleChange})),s.a.createElement("div",{className:"form__group"},s.a.createElement(N,{placeholder:"Enter longitude of Department",name:"longitude",value:this.state.longitude,handleChange:this.handleChange})),s.a.createElement(N,{type:"submit",value:"Submit"})),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("span",{className:"heading2"},"Registered Departments"),s.a.createElement("div",{className:"registered-groups"},this.state.departments.map(function(e){return s.a.createElement("span",{style:{fontSize:"1.25rem"},key:e.lattitude},e.name)})))}}]),t}(n.Component),je=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).props.match.params.option||a.props.history.push("/adminpanel/students"),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){window.scrollTo(0,0)}},{key:"render",value:function(){return s.a.createElement("div",{className:"adminpanel"},s.a.createElement(Ee,null),s.a.createElement("div",{className:"adminpanel__main-section"},"students"===this.props.match.params.option?s.a.createElement(ye,null):null,"teachers"===this.props.match.params.option?s.a.createElement(Se,null):null,"subjects"===this.props.match.params.option?s.a.createElement(ke,null):null,"groups"===this.props.match.params.option?s.a.createElement(Ce,null):null,"departments"===this.props.match.params.option?s.a.createElement(Oe,null):null))}}]),t}(n.Component),De=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return s.a.createElement(A,null,s.a.createElement(d.a,null,s.a.createElement("div",{className:"App"},s.a.createElement(P,null),s.a.createElement(h.a,null,s.a.createElement(p.a,{exact:!0,path:"/",component:x(H)}),s.a.createElement(p.a,{exact:!0,path:"/login",component:ge(O)}),s.a.createElement(p.a,{exact:!0,path:"/signup",component:ge(w)}),s.a.createElement(p.a,{exact:!0,path:"/explore",component:J}),s.a.createElement(p.a,{exact:!0,path:"/dashboard",component:pe(he)}),s.a.createElement(p.a,{path:"/dashboard/:option",component:pe(he)}),s.a.createElement(p.a,{exact:!0,path:"/adminpanel",component:fe(je)}),s.a.createElement(p.a,{path:"/adminpanel/:option",component:fe(je)})),s.a.createElement(W,null))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(s.a.createElement(De,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},84:function(e,t,a){e.exports=a(152)},89:function(e,t,a){},91:function(e,t,a){}},[[84,2,1]]]);
//# sourceMappingURL=main.00694dd4.chunk.js.map